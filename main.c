#include <fstream>
#include <iostream>
#include <vector>
#include <cstdlib>
#include "Polynomial.h"
#include "Term.h"
#include "Coefficient.h"
#include "DoubleTerm.h"

using namespace std;

int main()
{

  ofstream texFile;
  texFile.open("Anharmonic.tex", fstream::trunc);
  texFile << "\\documentclass{article}"                                           << endl;
  texFile << "\\title{Anharmonic Group Elements as Generated by Machine}"         << endl;
  texFile << "\\author{Ed Rogers}"                                                << endl;
  texFile << "\\date{March 2011}"                                                 << endl;
  texFile << "\\begin{document}"                                                  << endl;
  texFile << "   \\maketitle"                                                     << endl;
									          
  texFile << "\\begin{table}[!hp]"                                                << endl;
  texFile << "\\begin{center}"                                                    << endl;
  texFile << "\\begin{tabular}{rcl}"                                              << endl;
  texFile << "\\textbf{Typed in by hand} & & \\textbf{Computed by machine} \\\\"  << endl;
  texFile << "\\hline"                                                            << endl;

  vector<Term> L1Terms;
  L1Terms.push_back(Term("BBBB"));
  L1Terms.push_back(Term("(-1)*AAAA"));
  Polynomial L1(L1Terms);

  vector<Term> L2Terms;
  L2Terms.push_back(Term("BBBA"));
  L2Terms.push_back(Term("(-1)*BAAA"));
  Polynomial L2(L2Terms);

  vector<Term> L3Terms;
  L3Terms.push_back(Term("BB"));
  L3Terms.push_back(Term("(-1)*AA"));
  Polynomial L3(L3Terms);

  vector<Term> L4Terms;
  L4Terms.push_back(Term("BBBB"));
  L4Terms.push_back(Term("AAAA"));
  Polynomial L4(L4Terms);

  vector<Term> L5Terms;
  L5Terms.push_back(Term("BBBA"));
  L5Terms.push_back(Term("BAAA"));
  Polynomial L5(L5Terms);

  vector<Term> L6Terms;
  L6Terms.push_back(Term("BB"));
  L6Terms.push_back(Term("AA"));
  Polynomial L6(L6Terms);

  vector<Polynomial> PolyVect;
  PolyVect.push_back(L1);
  PolyVect.push_back(L2);
  PolyVect.push_back(L3);
  PolyVect.push_back(L4);
  PolyVect.push_back(L5);
  PolyVect.push_back(L6);

  for (vector<Polynomial>::iterator it = PolyVect.begin();
       it != PolyVect.end(); it++)
    {
      it->groupTerms();
    }


  for (vector<Polynomial>::iterator it1 = PolyVect.begin();
       it1 != PolyVect.end()-1; it1++)
    {
      for (vector<Polynomial>::iterator it2 = it1+1;
	   it2 != PolyVect.end(); it2++)
	{
	  Polynomial commutator = it1->commutedWith(*it2);

	  texFile << "$[";
	  it1->printTex(texFile);
	  texFile << ",";
	  it2->printTex(texFile);
	  texFile << "]";
	  texFile << "$";

	  texFile << " & = & ";
  
	  int termsAtATime = 2;
	  int linesPrinted = 0; 
	  texFile << "$";
	  commutator.groupTerms();
	  commutator.printTex(texFile,termsAtATime,linesPrinted++);
	  texFile << "$";
	  texFile << " \\\\" << endl;

	  int termsToPrint = commutator.getTerms().size()+commutator.getDoubleTerms().size();
	  int totalLinesToPrint = termsToPrint/termsAtATime;
	  if (termsToPrint%termsAtATime != 0) totalLinesToPrint++;
	  while (linesPrinted < totalLinesToPrint)
	    {
	      texFile << " & & $";
	      commutator.printTex(texFile,termsAtATime,linesPrinted++);
	      texFile << "$";
	      texFile << " \\\\" << endl;
	    }

	  texFile << "\\hline"                                                     << endl;
	  
	}
    }
  texFile << "\\end{tabular}"                                              << endl;
  texFile << "\\end{center}"                                               << endl;
  texFile << "\\end{table}"                                                << endl << endl;;

  texFile << "\\end{document}" << endl;

  return 0;
}
